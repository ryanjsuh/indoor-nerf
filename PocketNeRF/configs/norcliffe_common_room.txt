expname = norcliffe_structural
basedir = ./logs
dataset_type = blender

no_batching = True

use_viewdirs = True
 
white_bkgd = False
lrate_decay = 500

N_samples = 64
N_importance = 128
N_rand = 1024

precrop_iters = 500
precrop_frac = 0.5

half_res = False

# *** FIXED CONFIGURATION TO PREVENT BASE OVERFITTING ***
# Main issue: Normal prediction was enabled before structural priors activated,
# causing network architecture changes and training instability.

# PocketNeRF Structural Priors V2 - Fixed Configuration
use_structural_priors = True
predict_normals = False              # *** DISABLED until base training stabilizes ***

# DRASTICALLY reduced weights to prevent overfitting (20-50x smaller)
depth_prior_weight = 0.0              # Disabled - causing issues
planarity_weight = 0.001              # Was 0.05, now 50x smaller  
manhattan_weight = 0.0005             # Was 0.02, now 40x smaller
normal_consistency_weight = 0.0002    # Was 0.01, now 50x smaller

# MUCH later activation to allow geometry stabilization  
structural_loss_start_iter = 10000     # 50%

# Progressive ramping for stability
structural_loss_ramp_iters = 5000     # 25%

# Aggressive overfitting detection
overfitting_threshold = 5.0          # Very sensitive threshold
min_structural_weight = 0.00001      # Floor to prevent zero

# Base HashNeRF Settings - Closer to Original
lrate = 5e-4                         # *** RESTORED to default (was reduced to 1e-4) ***
sparse_loss_weight = 1e-10           # Default sparsity regularization
tv_loss_weight = 1e-6                # Default total variation regularization

# Reasonable logging intervals
i_video = 50000                      # Enable video rendering but less frequent
i_weights = 5000                     # Checkpoint frequency
i_testset = 1000                     # Test evaluation frequency
